<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch∆∞∆°ng 1: T·ªïng quan v·ªÅ Th·ªã gi√°c m√°y t√≠nh</title>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Main Style -->
    <link rel="stylesheet" href="../assets/css/style.css">
    <style>
        .part-btn {
            background: #fff;
            border: 1px solid #ddd;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
            color: #555;
            transition: all 0.2s;
            font-size: 14px;
        }

        .part-btn:hover {
            background: #f3f4f6;
            color: #0d6efd;
        }

        .part-btn.active {
            background: #0d6efd;
            color: #fff;
            border-color: #0d6efd;
        }

        /* Info Button Style */
        .info-btn {
            background: #fff;
            color: #8a2be2;
            /* BlueViolet */
            border: 1px solid #8a2be2;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .info-btn:hover {
            background: #8a2be2;
            color: white;
        }

        /* Modal Styles */
        .info-modal {
            display: none;
            position: fixed;
            z-index: 99999;
            padding-top: 50px;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgb(0, 0, 0);
            background-color: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(5px);
            text-align: center;
            /* Center content */
        }

        .modal-content {
            margin: auto;
            display: inline-block;
            /* Allow centering with text-align */
            max-width: 98vw;
            /* Maximize usage of screen */
            max-height: 98vh;
            width: auto;
            height: auto;
            object-fit: contain;
            border-radius: 4px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            animation-name: zoom;
            animation-duration: 0.4s;
            transition: width 0.3s ease;
            /* Smooth size transition */
            cursor: zoom-in;
        }

        /* Zoomed State - True Scrollable Zoom */
        .modal-content.zoomed {
            width: 150%;
            /* Force wider than screen to enable scrolling */
            max-width: none;
            max-height: none;
            margin: 0;
            cursor: grab;
            transform: none;
            /* Disable CSS transform to allow native scrolling */
        }

        .modal-content.zoomed:active {
            cursor: grabbing;
        }

        @keyframes zoom {
            from {
                transform: scale(0)
            }

            to {
                transform: scale(1)
            }
        }


        .close-modal {
            position: absolute;
            top: 20px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            transition: 0.3s;
            cursor: pointer;
            z-index: 100000;
        }

        .close-modal:hover,
        .close-modal:focus {
            color: #bbb;
            text-decoration: none;
            cursor: pointer;
        }

        /* Mobile adjustments */
        @media only screen and (max-width: 700px) {
            .modal-content {
                width: 100%;
            }

            .info-btn .btn-text {
                display: none;
                /* Hide text on small screens, show icon only */
            }
        }

        #caption {
            margin: auto;
            display: block;
            width: 80%;
            text-align: center;
            color: #ccc;
            padding: 10px 0;
            height: 150px;
            font-size: 18px;
        }
    </style>
</head>

<body>
    <div class="container" style="margin-top: 20px;">
        <!-- Tabs Nav -->
        <div class="tabs" style="display: flex; align-items: center; gap: 10px;">
            <!-- Back Button (Small) --><a href="../index.html" class="tab-btn"
                style="width: auto; padding: 0 15px; font-size: 14px; display: flex; align-items: center; color: #666; text-decoration: none; border-bottom: 3px solid transparent;"><i
                    class="fa-solid fa-arrow-left mr-2"></i></a><button class="tab-btn active"
                onclick="openTab(event, 'theory')"><i class="fa-solid fa-book mr-2"></i>L√Ω thuy·∫øt
            </button><button class="tab-btn" onclick="openTab(event, 'practice')"><i
                    class="fa-solid fa-code mr-2"></i>Th·ª±c h√†nh </button><button class="tab-btn"
                onclick="openTab(event, 'quiz')"><i class="fa-solid fa-puzzle-piece mr-2"></i>Tr·∫Øc nghi·ªám
            </button>
        </div>
        <!-- Tab Content: Theory -->
        <div id="theory" class="tab-content active">
            <!-- PART SELECTION & INFOGRAPHIC -->
            <div class="mb-4 flex space-x-2"
                style="display: flex; gap: 10px; margin-bottom: 15px; align-items: center; flex-wrap: wrap;">
                <div style="display: flex; gap: 10px; flex-wrap: wrap; flex-grow: 1;"><button class="part-btn active"
                        onclick="loadPart(1, this)">Ti·∫øt 1: Th·ªã Gi√°c M√°y T√≠nh T·ªïng
                        Quan</button><button class="part-btn" onclick="loadPart(2, this)">Ti·∫øt 2: Computer
                        Vision Fundamentals</button><button class="part-btn" onclick="loadPart(3, this)">Ti·∫øt 3: OpenCV
                        Th·ª±c H√†nh X·ª≠ L√Ω ·∫¢nh S·ªë</button></div>
                <!-- Infographic Button --><button class="part-btn info-btn" onclick="showInfographic()"
                    title="Xem T√≥m t·∫Øt n·ªôi dung (Infographic)"><i class="fa-solid fa-images"></i><span
                        class="btn-text">Infographic</span></button>
            </div>
            <div class="bg-white p-4 rounded-xl shadow-sm" style="height: 800px;">
                <!-- PDF Viewer / Slide Player --><iframe id="pdf-frame" width="100%" height="100%"
                    style="border: none;"></iframe>
            </div>
        </div>
        <!-- Tab Content: Practice -->
        <div id="practice" class="tab-content">
            <div class="notebook-section">
                <h3 class="text-xl font-bold mb-4">üìÇ B√†i t·∫≠p & Google Colab</h3>
                <table class="notebook-table">
                    <thead>
                        <tr>
                            <th>Tu·∫ßn</th>
                            <th>T√™n Notebook/B√†i t·∫≠p</th>
                            <th>M·ª©c ƒë·ªô</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="notebook-list">
                        <tr>
                            <td>Tu·∫ßn 1</td>
                            <td>Gi·ªõi thi·ªáu Computer Vision & OpenCV</td>
                            <td><span class="badge easy">C∆° b·∫£n</span></td>
                            <td><a href="#" class="btn-start" style="padding: 5px 10px; font-size: 0.8rem;">Open
                                    Colab</a></td>
                        </tr>
                        <!-- Add more rows here -->
                    </tbody>
                </table>
            </div>
        </div>
        <!-- Tab Content: Quiz -->
        <div id="quiz" class="tab-content">
            <!-- Dynamic Quiz Link -->
            <div class="bg-white p-6 rounded-xl shadow-sm h-full">
                <h3 class="mb-4 text-center font-bold text-gray-700">L√†m B√†i Tr·∫Øc Nghi·ªám Ch∆∞∆°ng 1
                </h3><iframe id="quiz-frame" class="quiz-frame" src=""></iframe>
            </div>
        </div>
    </div>
    <!-- INFOGRAPHIC MODAL -->
    <div id="info-modal" class="info-modal"><span class="close-modal" onclick="closeInfographic()">&times;
        </span><img class="modal-content" id="info-image">
        <div id="caption"></div>
    </div>
    <footer class="footer">
        <p>&copy;
            2026 Computer Vision Course.</p>
    </footer>
    <script> // Tab function

        function openTab(evt, tabName) {
            var i,
                tabcontent,
                tablinks;
            tabcontent = document.getElementsByClassName("tab-content");

            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].style.display = "none";
                tabcontent[i].classList.remove('active');
            }

            tablinks = document.getElementsByClassName("tab-btn");

            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].className = tablinks[i].className.replace(" active", "");
            }

            document.getElementById(tabName).style.display = "block";
            document.getElementById(tabName).classList.add('active');
            evt.currentTarget.className += " active";
        }

        // Config specific for Chapter 1
        const config = {
            parts: {
                1: 'Ph·∫ßn 1_Th·ªã_Gi√°c_M√°y_T√≠nh_T·ªïng_Quan/index.html',
                2: 'Ph·∫ßn 2_Computer_Vision_Fundamentals/index.html',
                3: 'Ph·∫ßn 3_OpenCV_Th·ª±c_H√†nh_X·ª≠_L√Ω_·∫¢nh_S·ªë/index.html'
            }

            ,
            quizCsv: '../Quiz/index.html?group=Chuong1'
        }

            ;

        let currentPartId = 1; // Track current part

        function loadPart(partId, btn) {
            currentPartId = partId; // Update current part

            // Update Active State
            if (btn) {
                document.querySelectorAll('.part-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            }

            // Load Content
            const url = config.parts[partId];

            if (url) {
                document.getElementById('pdf-frame').src = url;
            }

            else {
                console.error("Part not found:", partId);
                alert("N·ªôi dung b√†i h·ªçc n√†y ch∆∞a kh·∫£ d·ª•ng.");
            }
        }

        /* INFOGRAPHIC LOGIC */
        function showInfographic() {
            const modal = document.getElementById("info-modal");
            const modalImg = document.getElementById("info-image");
            const captionText = document.getElementById("caption");

            // Construct path: "Infographic/Ph·∫ßn 1_.png"
            const imgPath = `Infographic/Ph·∫ßn ${currentPartId}_.png`;

            modal.style.display = "block";
            modalImg.src = imgPath;
            // Reset Zoom
            modalImg.classList.remove('zoomed');
            captionText.innerHTML = `Infographic - Ti·∫øt ${currentPartId} <br> <span style='font-size:14px; color:#aaa'>(Nh·∫•n v√†o ·∫£nh ƒë·ªÉ ph√≥ng to/thu nh·ªè)</span>`;
        }

        function closeInfographic() {
            document.getElementById("info-modal").style.display = "none";
        }

        // Close on outside click
        window.onclick = function (event) {
            const modal = document.getElementById("info-modal");
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        // Drag to Scroll Logic
        const img = document.getElementById("info-image");
        const modal = document.getElementById("info-modal");
        let isDown = false;
        let startX, startY;
        let scrollLeft, scrollTop;
        let isDragging = false; // Flag to distinguish click from drag

        img.addEventListener('mousedown', (e) => {
            if (!img.classList.contains('zoomed')) return;
            isDown = true;
            isDragging = false; // Reset drag flag
            startX = e.pageX - modal.offsetLeft;
            startY = e.pageY - modal.offsetTop;
            scrollLeft = modal.scrollLeft;
            scrollTop = modal.scrollTop;
            // cursor is already handled by css :active
            e.preventDefault(); // prevent image drag
        });

        img.addEventListener('mouseleave', () => {
            isDown = false;
        });

        img.addEventListener('mouseup', (e) => {
            isDown = false;
            if (!isDragging) {
                // It was a click, toggle zoom
                e.stopPropagation();
                img.classList.toggle("zoomed");
            }
            // If it was a drag, do nothing (just end drag)
        });

        img.addEventListener('mousemove', (e) => {
            if (!isDown) return;
            e.preventDefault();
            const x = e.pageX - modal.offsetLeft;
            const y = e.pageY - modal.offsetTop;
            const walkX = (x - startX) * 1.5; // scroll-fast
            const walkY = (y - startY) * 1.5;

            // If moved more than a few pixels, consider it a drag
            if (Math.abs(walkX) > 5 || Math.abs(walkY) > 5) {
                isDragging = true;
            }

            modal.scrollLeft = scrollLeft - walkX;
            modal.scrollTop = scrollTop - walkY;
        });

        document.addEventListener('DOMContentLoaded', () => {
            // Load Default Part (Part 1)
            loadPart(1, document.querySelector('.part-btn.active'));

            // Set Quiz src
            document.getElementById('quiz-frame').src = config.quizCsv;
        });
    </script>
</body>

</html>